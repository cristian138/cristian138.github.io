<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Créditos Académicos</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    form { max-width: 400px; }
    label { display: block; margin-top: 1em; }
    input[type="text"],
    input[type="number"] { width: 100%; padding: 0.5em; }
    button { margin-top: 1em; padding: 0.5em 1em; }
    .error { color: #a00; margin-top: 1em; }
    .resultado { margin-top: 1em; background: #eef; padding: 1em; }
  </style>
</head>
<body>
  <h1>Calculadora de Créditos Académicos</h1>

  <div id="mensajeError" class="error"></div>

  <form id="formulario">
    <label>
      Valor por crédito básico:
      <input type="text" id="valor_basico" required>
    </label>

    <label>
      Valor por crédito disciplinar:
      <input type="text" id="valor_disciplinar" required>
    </label>

    <label>
      Total pagado:
      <input type="text" id="total_pagado" required>
    </label>

    <label>
      Total de créditos matriculados:
      <input type="number" id="total_creditos" required>
    </label>

    <button type="submit">Calcular</button>
    <button type="button" onclick="limpiar()">Limpiar</button>
  </form>

  <div id="resultados" class="resultado"></div>

  <script>
    const nf = new Intl.NumberFormat('es-CO');

    function formatInput(evt) {
      let val = evt.target.value.replace(/\./g, '');
      if (!val) return evt.target.value = '';
      const num = parseInt(val, 10);
      if (isNaN(num)) return evt.target.value = '';
      evt.target.value = nf.format(num);
    }

    document.getElementById('valor_basico').addEventListener('input', formatInput);
    document.getElementById('valor_disciplinar').addEventListener('input', formatInput);
    document.getElementById('total_pagado').addEventListener('input', formatInput);

    document.getElementById('formulario').addEventListener('submit', function(event) {
      event.preventDefault();

      const rawBasico = document.getElementById('valor_basico').value.replace(/\./g, '');
      const rawDisciplinar = document.getElementById('valor_disciplinar').value.replace(/\./g, '');
      const rawPagado = document.getElementById('total_pagado').value.replace(/\./g, '');
      const totalCreditos = parseInt(document.getElementById('total_creditos').value);

      const mensajeError = document.getElementById('mensajeError');
      const resultadosDiv = document.getElementById('resultados');
      mensajeError.textContent = '';
      resultadosDiv.innerHTML = '';

      if (!/^[0-9]+$/.test(rawBasico) || !/^[0-9]+$/.test(rawDisciplinar) || !/^[0-9]+$/.test(rawPagado) || isNaN(totalCreditos)) {
        mensajeError.textContent = "Por favor ingrese valores numéricos enteros válidos en todos los campos.";
        return;
      }

      const valorBasico = parseInt(rawBasico);
      const valorDisciplinar = parseInt(rawDisciplinar);
      const totalPagado = parseInt(rawPagado);

      const resultados = [];
      const maxBasicos = Math.floor(totalPagado / valorBasico);

      for (let b = 0; b <= maxBasicos; b++) {
        const d = totalCreditos - b;
        if (d < 0) continue;
        if (b * valorBasico + d * valorDisciplinar === totalPagado) {
          resultados.push({ b, d });
        }
      }

      if (resultados.length === 0) {
        mensajeError.textContent = "No se encontró ninguna combinación válida con los datos proporcionados.";
      } else {
        const lista = document.createElement('ul');
        resultados.forEach(sol => {
          const item = document.createElement('li');
          item.innerHTML = `Básicos: <strong>${sol.b}</strong>, Disciplinares: <strong>${sol.d}</strong>`;
          lista.appendChild(item);
        });
        resultadosDiv.innerHTML = '<h2>Combinaciones válidas:</h2>';
        resultadosDiv.appendChild(lista);
      }
    });

    function limpiar() {
      document.getElementById('valor_basico').value = "";
      document.getElementById('valor_disciplinar').value = "";
      document.getElementById('total_pagado').value = "";
      document.getElementById('total_creditos').value = "";
      document.getElementById('mensajeError').textContent = "";
      document.getElementById('resultados').innerHTML = "";
    }
  </script>
</body>
</html>
